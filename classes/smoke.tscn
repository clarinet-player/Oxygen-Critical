[gd_scene load_steps=5 format=3 uid="uid://n6ut2npeygk2"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_oysea"]
seed = 6
frequency = 0.03

[sub_resource type="NoiseTexture3D" id="NoiseTexture3D_ij041"]
depth = 128
noise = SubResource("FastNoiseLite_oysea")

[sub_resource type="FogMaterial" id="FogMaterial_5rbb3"]
density_texture = SubResource("NoiseTexture3D_ij041")

[sub_resource type="GDScript" id="GDScript_xsm31"]
script/source = "extends FogVolume


var start_density := 1.0
var fade_speed := 1.0

var mat


func _ready():
	mat = FogMaterial.new()
	mat.density = start_density
	material = mat


func _process(delta):
	mat.density = lerp(mat.density, 0.0, delta * fade_speed)
	var size_change = delta * fade_speed * (100 / size.length())
	size.x += size_change
	size.y += size_change
	size.z += size_change
	
	if mat.density < 0.001:
		queue_free()
"

[node name="Smoke" type="FogVolume"]
shape = 0
material = SubResource("FogMaterial_5rbb3")
script = SubResource("GDScript_xsm31")

[gd_scene load_steps=2 format=3 uid="uid://o08p2kot83ge"]

[sub_resource type="GDScript" id="GDScript_wdita"]
script/source = "extends Node



var fov := 75.0
var saved_inventory := [1, 5, 4]
var shadows_enabled := true
var volumetrics_enabled := true



func _ready():
	read_file()



func read_file():
	if not FileAccess.file_exists(\"user://usersettings.json\"):
		write_file()
		return
	
	var file = FileAccess.open(\"user://usersettings.json\", FileAccess.READ)
	var string = file.get_line()
	var json = JSON.new()
	file.close()
	
	if json.parse(string) != OK:
		write_file()
		return
	
	var data : Dictionary = json.get_data()
	if data.has(\"fov\"):
		fov = data[\"fov\"]
	if data.has(\"saved_inventory\"):
		saved_inventory = data[\"saved_inventory\"]
	if data.has(\"shadows_enabled\"):
		shadows_enabled = data[\"shadows_enabled\"]
	if data.has(\"volumetrics_enabled\"):
		volumetrics_enabled = data[\"volumetrics_enabled\"]



func write_file():
	var file = FileAccess.open(\"user://usersettings.json\", FileAccess.WRITE)
	var data = {
		\"fov\": fov,
		\"shadows_enabled\": shadows_enabled,
		\"volumetrics_enabled\": volumetrics_enabled,
		\"saved_inventory\": saved_inventory
	}
	file.store_line(JSON.stringify(data))
	file.close()
"

[node name="Settings" type="Node"]
script = SubResource("GDScript_wdita")
